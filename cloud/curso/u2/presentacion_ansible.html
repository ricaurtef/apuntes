---
layout: presentacion
title: Vagrant y ansible. Una combinación explosiva
tema: solarized
---

<section>
	    <h1>Vagrant y ansible</h1>
	    <h3>Una combinación explosiva</h3>
	    <h4>2ª Parte: Ansible</h4>
	    <p>
	      <small><a href="http://albertomolina.wordpress.com">Alberto Molina
	      Coballes</a> / <a
	      href="http://twitter.com/alberto_molina">@alberto_molina</a> y <a
	      href="http://josedomingo.org">José Domingo Muñoz
	      Rodríguez</a> / <a
	      href="http://twitter.com/Pledin_JD">@Pledin_JD</a> </small>
	    </p>
	    <p><small>
		<a href="http://creativecommons.org/licenses/by-sa/3.0/"><img src="../../img/cc_by_sa.png"
		width="100px" border="0"/></a></small></p>
	  </section>

	  <section>
	    <section>
	      <h2>Ansible. Introducción</h2>
	       <ul>
		 <li>En ciencia ficción: Dispositivo que permite comunicarse a mayor velocidad que la luz</li>
		 <li>Ansible es una aplicación libre de orquestación escrita en python</li>
		 <li>La primera versión se desarrolló en febrero de 2012 (!)
	       </ul>
	    </section>
	    <section>
	      <h2>Ansible. Introducción (2)</h2>
	      <ul>
		 <li>Ventajas frente a otro software de automatización (puppet o chef):</li>
		 <ul>
		   <li>Muy fácil instalación</li>
		   <li>Comunidad de desarrolladores muy activa</li>
		   <li>Muy pocas dependencias</li>
		   <li>Ideal para entornos pequeños y homogéneos</li>
		   <li>No es necesario configurar nada en los clientes</li>
		 </ul>
		 <li>Inconvenientes:</li>
		 <ul>
		   <li>Más complejo en entornos muy heterogéneos</li>
		   <li>Menos "recetas" desarrolladas previamente al ser muy nuevo</li>
		 </ul>
	       </ul>
	      <p>Lo importante no es qué herramienta de gestión de la
	      configuración utilizar. Lo importante es utilizar al menos una.</p>
	  </section>
	  <section>
	    <h2>Ansible. Instalación</h2>
	    <p>Para utilizar la última versión:</p>
	    <pre>

# apt-get install python-pip python-dev
# pip install ansible
	    </pre>
	    <p><strong>Voila!</strong></p>
	    
	  </section>
	  <section>
	    <h2>Ansible. Playbooks</h2>
	    <p>Las tareas a realizar por ansible se describen en formato yaml en ficheros denominados “playbooks”, que pueden incluir una o varias jugadas, por ejemplo:</p>
	    
	     <pre>	
	       <code data-trim>
---
- name: Apache installation
  hosts: all
  sudo: True
  tasks:
  - name: Set proper sources.list
    copy: >
      src=files/etc/apt/sources.list
      dest=/etc/apt/sources.list
      owner=root
      mode=644
  - name: Ensure apache is installed (after updating)
    apt: pkg=apache2 update_cache=yes
	       </code>
	     </pre>
	  </section>
	  </section>
	  <section>
	    <h2>Vagrant + Ansible</h2>
	    <p>Imagina que la siguiente situación para una determinada configuración de máquinas virtuales se pudiera hacer automáticamente:</p>
	    <ul>
	      <li>Levantar las máquinas virtuales</li>
	      <li>Configurar la red</li>
	      <li>Realizar las actualizaciones de software</li>
	      <li>Instalar los paquetes del software que se va a utilizar</li>
	      <li>Copiar los ficheros de configuración de plantillas previamente creadas</li>
	      <li>Levantar o parar los servicios que se determinen</li>
	      <li>Ejecutar cualquier tarea en cada una de las máquinas virtuales</li>
	      <li>Dejar el entorno completamente operativo</li>
	    </ul>
	    <p>No es ningún sueño: Eso es vagrant + ansible :-)</p>

	  </section>
</section>
